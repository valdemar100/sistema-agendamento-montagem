<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Agendamento de Montagem de MÃ³veis</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸª‘ Sistema de Agendamento de Montagem</h1>
            <p>GestÃ£o completa de agendamentos de montagem de mÃ³veis</p>
            <div id="user-info-header" style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.2); border-radius: 10px; display: none;">
                <span id="user-name-display"></span>
                <button onclick="logout()" style="margin-left: 15px; padding: 5px 15px; border: none; background: #ff6b6b; color: white; border-radius: 5px; cursor: pointer;">ï¿½ Sair</button>
            </div>
        </div>

        <!-- NavegaÃ§Ã£o por Casos de Uso -->
        <div class="tabs" id="main-tabs">
            <button class="tab-button" data-tab="endereco">ğŸ  Cadastrar EndereÃ§o</button>
            <button class="tab-button active" data-tab="solicitar">ğŸ“… Solicitar Montagem</button>
            <button class="tab-button" data-tab="visualizar">ğŸ‘€ Visualizar Agendamentos</button>
            <button class="tab-button" data-tab="montador">ğŸ‘· Montador</button>
        </div>

        <!-- TAB: Cadastrar-se (Caso de Uso 1) - REMOVIDO -->
        <!-- TAB: Fazer Login (Caso de Uso 2) - REMOVIDO -->

        <!-- TAB: Cadastrar EndereÃ§o (Caso de Uso - Include) -->
        <div id="tab-endereco" class="tab-content active">
            <h2>ğŸ  Cadastrar EndereÃ§o</h2>
            <p style="margin-bottom: 20px; color: #666;">Informe o endereÃ§o onde serÃ¡ realizada a montagem</p>
            
            <div class="user-info" style="display: none;"></div>
            
            <form id="form-endereco">
                <div class="grid-2">
                    <div class="form-group">
                        <label for="endereco-rua">Rua:</label>
                        <input type="text" id="endereco-rua" required>
                    </div>
                    <div class="form-group">
                        <label for="endereco-numero">NÃºmero:</label>
                        <input type="text" id="endereco-numero" required>
                    </div>
                </div>
                
                <div class="grid-2">
                    <div class="form-group">
                        <label for="endereco-bairro">Bairro:</label>
                        <input type="text" id="endereco-bairro" required>
                    </div>
                    <div class="form-group">
                        <label for="endereco-cidade">Cidade:</label>
                        <input type="text" id="endereco-cidade" required>
                    </div>
                </div>
                
                <div class="grid-2">
                    <div class="form-group">
                        <label for="endereco-complemento">Complemento:</label>
                        <input type="text" id="endereco-complemento">
                    </div>
                    <div class="form-group">
                        <label for="endereco-cep">CEP:</label>
                        <input type="text" id="endereco-cep" required>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary">Cadastrar EndereÃ§o</button>
            </form>
            
            <div id="endereco-result" class="result-box"></div>
        </div>

        <!-- TAB: Solicitar Montagem (Caso de Uso Principal + Diagrama de SequÃªncia) -->
        <div id="tab-solicitar" class="tab-content">
            <h2>ğŸ“… Solicitar Montagem</h2>
            <p style="margin-bottom: 20px; color: #666;">
                Agende a montagem dos seus mÃ³veis selecionando data e horÃ¡rio
            </p>
            
            <div class="user-info" style="display: none;"></div>
            
            <form id="form-montagem">
                <div class="form-group">
                    <label for="montagem-endereco">EndereÃ§o para o ServiÃ§o:</label>
                    <select id="montagem-endereco" required>
                        <option value="">Selecione um endereÃ§o cadastrado</option>
                    </select>
                    <small style="color: #666;">Escolha o endereÃ§o onde a montagem serÃ¡ realizada</small>
                </div>
                
                <div class="grid-2">
                    <div class="form-group">
                        <label for="montagem-data">Data do ServiÃ§o:</label>
                        <input type="date" id="montagem-data" required>
                    </div>
                    <div class="form-group">
                        <label for="montagem-horario">HorÃ¡rio de InÃ­cio:</label>
                        <input type="time" id="montagem-horario" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="montagem-movel">DescriÃ§Ã£o do MÃ³vel:</label>
                    <textarea id="montagem-movel" rows="3" placeholder="Descreva o mÃ³vel que precisa ser montado (ex: Guarda-roupa 3 portas com espelho, Mesa de escritÃ³rio com gavetas, Estante para livros 5 prateleiras, etc...)" required></textarea>
                    <small style="color: #666;">Detalhe o mÃ³vel para que o montador possa se preparar adequadamente</small>
                </div>
                
                <div class="form-group">
                    <label for="montagem-servicos">ServiÃ§os Adicionais (opcional):</label>
                    <textarea id="montagem-servicos" rows="4" placeholder="Descreva serviÃ§os adicionais necessÃ¡rios (ex: FuraÃ§Ã£o de parede, instalaÃ§Ã£o de suportes, montagem de gavetas extras, etc...)"></textarea>
                    <small style="color: #666;">Descreva qualquer serviÃ§o adicional que vocÃª precisa alÃ©m da montagem bÃ¡sica</small>
                </div>
                
                <button type="submit" class="btn btn-success">Solicitar Montagem</button>
            </form>
            
            <div id="montagem-result" class="result-box"></div>
        </div>

        <!-- TAB: Visualizar Agendamentos (Caso de Uso) -->
        <div id="tab-visualizar" class="tab-content">
            <h2>ğŸ‘€ Visualizar Status dos Agendamentos</h2>
            <p style="margin-bottom: 20px; color: #666;">Acompanhe seus agendamentos</p>
            
            <div class="user-info" style="display: none;"></div>
            
            <button class="btn btn-primary" onclick="visualizarAgendamentos()">ğŸ”„ Atualizar Lista</button>
            
            <div id="agendamentos-lista" style="margin-top: 20px;">
                <p>Clique em "Atualizar Lista" para carregar seus agendamentos.</p>
            </div>
            
            <div id="visualizar-result" class="result-box"></div>
        </div>

        <!-- TAB: Montador -->
        <div id="tab-montador" class="tab-content">
            <h2>ğŸ‘· Ãrea do Montador</h2>
            <p style="margin-bottom: 20px; color: #666;">Gerencie e finalize suas montagens</p>
            
            <h3>ğŸ“… Confirmar Disponibilidade</h3>
            <p style="margin-bottom: 15px; color: #666;">Mantenha seu status atualizado para receber novos agendamentos</p>
            
            <div id="status-disponibilidade" style="margin-bottom: 20px; padding: 15px; border-radius: 8px; background: #f8f9fa; border-left: 4px solid #007bff;">
                <p><strong>Status atual:</strong> <span id="status-atual">Carregando...</span></p>
                <p style="margin: 5px 0 0 0; font-size: 14px; color: #666;">Ãšltima atualizaÃ§Ã£o: <span id="ultima-atualizacao">-</span></p>
            </div>
            
            <div style="display: flex; gap: 10px; margin-bottom: 30px;">
                <button class="btn btn-success" onclick="confirmarDisponibilidade(true)">âœ… DisponÃ­vel</button>
                <button class="btn btn-danger" onclick="confirmarDisponibilidade(false)">âŒ IndisponÃ­vel</button>
                <button class="btn btn-primary" onclick="verificarStatusDisponibilidade()">ğŸ”„ Atualizar Status</button>
            </div>
            
            <hr style="margin: 30px 0;">
            
            <h3>âœ… Registrar Montagem ConcluÃ­da</h3>
            <form id="form-conclusao" enctype="multipart/form-data">
                <div class="grid-2">
                    <div class="form-group">
                        <label for="conclusao-id">ID do Agendamento:</label>
                        <input type="number" id="conclusao-id" required>
                    </div>
                    <div class="form-group">
                        <label for="conclusao-horario">HorÃ¡rio de TÃ©rmino:</label>
                        <input type="time" id="conclusao-horario" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="conclusao-fotos">ğŸ“¸ Fotos do MÃ³vel Montado:</label>
                    <input type="file" id="conclusao-fotos" multiple accept="image/*">
                    <small>Selecione uma ou mais fotos do mÃ³vel montado (formatos: JPG, PNG, WebP)</small>
                </div>
                
                <div class="form-group">
                    <label for="conclusao-observacoes">ğŸ“ ObservaÃ§Ãµes sobre a Montagem:</label>
                    <textarea id="conclusao-observacoes" rows="4" placeholder="Descreva detalhes sobre a montagem, dificuldades encontradas, qualidade do material, etc..."></textarea>
                </div>
                
                <button type="submit" class="btn btn-success">Marcar como ConcluÃ­do e Enviar para Cliente</button>
            </form>
            
            <div id="montador-result" class="result-box"></div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
